
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="704px" preserveAspectRatio="none" style="width:887px;height:704px;" version="1.1" viewBox="0 0 887 704" width="887px" zoomAndPan="magnify"><defs/><g><!--MD5=[fbc87193dbaf4d95561dea2c320d4a47]
cluster E1--><polygon fill="#98FB98" points="488,333,597,333,604,355.2969,650,355.2969,650,427,488,427,488,333" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="488" x2="604" y1="355.2969" y2="355.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="103" x="492" y="347.9951">Environment</text><!--MD5=[e4f7fae6ed58524ba242bb0b0d3be6b7]
cluster E2--><polygon fill="#98FB98" points="488,49,597,49,604,71.2969,634,71.2969,634,143,488,143,488,49" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="488" x2="604" y1="71.2969" y2="71.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="103" x="492" y="63.9951">Environment</text><!--MD5=[d5e69f78d87373223dbae638b30a9c99]
cluster E3--><polygon fill="#98FB98" points="674,333,783,333,790,355.2969,870,355.2969,870,530,674,530,674,333" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="674" x2="790" y1="355.2969" y2="355.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="103" x="678" y="347.9951">Environment</text><!--MD5=[68e6f66fb88921cf0ce1150788751dd4]
cluster RaspberryPi--><polygon fill="#FFA07A" points="16,6,118,6,125,28.2969,464,28.2969,464,697,16,697,16,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="125" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="96" x="20" y="20.9951">RaspberryPi</text><!--MD5=[161529c905c57da6c5c3c392fbf6cca7]
cluster Attached Hardware--><polygon fill="#FFF5EE" points="270,333,430,333,437,355.2969,440,355.2969,440,427,270,427,270,333" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="270" x2="437" y1="355.2969" y2="355.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="154" x="274" y="347.9951">Attached Hardware</text><!--MD5=[42591781c74864aa6bd8b9830e23a81c]
cluster Docker--><polygon fill="#87CEFA" points="40,192,102,192,109,214.2969,246,214.2969,246,673,40,673,40,192" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="40" x2="109" y1="214.2969" y2="214.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="56" x="44" y="206.9951">Docker</text><!--MD5=[fecebf0184799789897c7587c6453b83]
cluster Crontab Scripts--><polygon fill="#FFFFFF" points="132,49,261,49,268,71.2969,403,71.2969,403,143,132,143,132,49" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="132" x2="268" y1="71.2969" y2="71.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="123" x="136" y="63.9951">Crontab Scripts</text><!--MD5=[31d6b3a0d432f5ada5a3a8c5ac84e56c]
cluster Ex--><polygon fill="#FFFFFF" points="488,579,561,579,568,601.2969,594,601.2969,594,673,488,673,488,579" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="488" x2="568" y1="601.2969" y2="601.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="67" x="492" y="593.9951">External</text><!--MD5=[acf059b703978950c3503f3e640c32cd]
class sensorLacrosse--><rect codeLine="24" fill="#FFFFFF" height="23.9688" id="sensorLacrosse" style="stroke:#000000;stroke-width:1.5;" width="130" x="504" y="387"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="507" y="403.1387">La Crosse Sensor(s)</text><!--MD5=[22502c3db44c14b28482b7b4e23d3bae]
class sensorMiflora--><rect codeLine="28" fill="#FFFFFF" height="23.9688" id="sensorMiflora" style="stroke:#000000;stroke-width:1.5;" width="113" x="504.5" y="103"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="507.5" y="119.1387">MiFlora Sensor(s)</text><!--MD5=[51acb274395edb6f88ee2cba909395a8]
class fritzBox--><rect codeLine="32" fill="#FFFFFF" height="23.9688" id="fritzBox" style="stroke:#000000;stroke-width:1.5;" width="55" x="690.5" y="387"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="693.5" y="403.1387">FritzBox</text><!--MD5=[366497855f46827a890c54802e201935]
class fritzPlug--><rect codeLine="33" fill="#FFFFFF" height="23.9688" id="fritzPlug" style="stroke:#000000;stroke-width:1.5;" width="163" x="690.5" y="490"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="693.5" y="506.1387">Fritz DECT 200 smart plug</text><!--MD5=[00e09975e8c15c689e98168c296211fd]
class jeelink--><rect codeLine="39" fill="#FFFFFF" height="23.9688" id="jeelink" style="stroke:#000000;stroke-width:1.5;" width="49" x="350.5" y="387"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="43" x="353.5" y="403.1387">JeeLink</text><!--MD5=[5ea93f34c9db0183587b445636901c88]
class nodered--><rect codeLine="43" fill="#FFFFFF" height="23.9688" id="nodered" style="stroke:#000000;stroke-width:1.5;" width="58" x="172" y="387"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="52" x="175" y="403.1387">nodered</text><!--MD5=[7c0982c1395781ced04ca00a36c25145]
class grafana--><rect codeLine="44" fill="#FFFFFF" height="23.9688" id="grafana" style="stroke:#000000;stroke-width:1.5;" width="51" x="65.5" y="633"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="68.5" y="649.1387">grafana</text><!--MD5=[ade9db4f15f152926b2e1fe10e395b07]
class influxdb--><rect codeLine="45" fill="#FFFFFF" height="23.9688" id="influxdb" style="stroke:#000000;stroke-width:1.5;" width="53" x="64.5" y="490"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="67.5" y="506.1387">influxdb</text><!--MD5=[c24edbdbbc0750b8dddfd0ea1ca3e084]
class mosquitto--><rect codeLine="46" fill="#FFFFFF" height="23.9688" id="mosquitto" style="stroke:#000000;stroke-width:1.5;" width="66" x="131" y="246"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="134" y="262.1387">mosquitto</text><!--MD5=[8ec133213a10b86d0addb07a2405c8b5]
class scriptRaspiHealth--><rect codeLine="54" fill="#FFFFFF" height="23.9688" id="scriptRaspiHealth" style="stroke:#000000;stroke-width:1.5;" width="95" x="148.5" y="103"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="151.5" y="119.1387">raspi-health.py</text><!--MD5=[88a7b43ba4dabfe1670a465842720d4b]
class scriptMiflora--><rect codeLine="55" fill="#FFFFFF" height="23.9688" id="scriptMiflora" style="stroke:#000000;stroke-width:1.5;" width="108" x="279" y="103"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="102" x="282" y="119.1387">miflora/gather.py</text><!--MD5=[a9a1a25f326d2d49bb1fe255cae817fc]
class discord--><rect codeLine="64" fill="#FFFFFF" height="23.9688" id="discord" style="stroke:#000000;stroke-width:1.5;" width="73" x="504.5" y="633"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="507.5" y="649.1387">DiscordBot</text><!--MD5=[386443b4612aa07dee343b3673396a25]
link fritzBox to fritzPlug--><path codeLine="34" d="M726.467,415.836 C736.597,434.784 753.456,466.315 763.57,485.233 " fill="none" id="fritzBox-fritzPlug" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="765.988,489.755,765.2732,479.9321,763.6311,485.3454,758.2178,483.7032,765.988,489.755" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="723.985,411.195,724.7011,421.0178,726.3425,415.6043,731.756,417.2457,723.985,411.195" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="750" y="456.0669">exchange data</text><!--MD5=[434968027c3affb00ae0d9920bf82087]
link mosquitto to nodered--><path codeLine="48" d="M167.028,270.375 C173.592,295.035 189.15,353.481 196.718,381.912 " fill="none" id="mosquitto-to-nodered" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="198.034,386.856,199.583,377.1297,196.7472,382.0244,191.8525,379.1886,198.034,386.856" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="181" y="313.0669">push data</text><!--MD5=[c44c863058bcedc2dbf3bee2aafbf085]
link nodered to influxdb--><path codeLine="49" d="M188.808,411.195 C168.902,429.471 129.42,465.724 107.189,486.136 " fill="none" id="nodered-to-influxdb" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="103.247,489.755,112.5824,486.6164,106.9307,486.3741,107.1729,480.7224,103.247,489.755" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="154" y="456.0669">store timeseries data</text><!--MD5=[8ef4b411fbac159fefa1e848fedf73d6]
reverse link influxdb to grafana--><path codeLine="50" d="M91,519.092 C91,548.049 91,608.223 91,632.9874 " fill="none" id="influxdb-backto-grafana" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="91,514.064,87,523.064,91,519.064,95,523.064,91,514.064" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="92" y="559.0669">get timeseries data</text><!--MD5=[0c3c7b37073fc50b23e695cba231056f]
link scriptRaspiHealth to scriptMiflora--><!--MD5=[60c07c56880ca766bc0563fe4c9abd1b]
link scriptRaspiHealth to mosquitto--><path codeLine="60" d="M180.812,127.326 C171.725,135.1 161,146.285 156,159 C145.277,186.271 152.532,221.033 158.476,240.978 " fill="none" id="scriptRaspiHealth-to-mosquitto" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="160.024,245.954,161.1691,236.1719,158.5383,241.1798,153.5304,238.549,160.024,245.954" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="157" y="172.0669">send RPi health data</text><!--MD5=[5c4d37f106b8f7b91c6dc67a3b93e961]
reverse link jeelink to sensorLacrosse--><path codeLine="67" d="M404.649,399 C430.941,399 470.269,399 503.861,399 " fill="none" id="jeelink-backto-sensorLacrosse" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="399.57,399,408.57,403,404.57,399,408.57,395,399.57,399" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="419.75" y="392.0669">send data</text><!--MD5=[72dfd7a940ddb226af3452fd3c5c5751]
reverse link nodered to jeelink--><path codeLine="68" d="M235.411,399 C269.3,399 320.229,399 350.292,399 " fill="none" id="nodered-backto-jeelink" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="230.124,399,239.124,403,235.124,399,239.124,395,230.124,399" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="250.25" y="392.0669">receive data</text><!--MD5=[3ec76bd61920ca3a7e5035baf3fbd541]
link scriptMiflora to sensorMiflora--><path codeLine="69" d="M387.033,115 C420.67,115 464.045,115 499.069,115 " fill="none" id="scriptMiflora-to-sensorMiflora" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="504.173,115,495.173,111,499.173,115,495.173,119,504.173,115" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="418.25" y="108.0669">poll data</text><!--MD5=[4bea3f0d5596596e2b59456a6b84ea2b]
link scriptMiflora to mosquitto--><path codeLine="70" d="M327.625,127.214 C321.039,140.111 308.899,161.383 294,176 C263.853,205.575 221.08,229.628 192.948,243.629 " fill="none" id="scriptMiflora-to-mosquitto" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="188.218,245.957,198.0593,245.5701,192.7038,243.7484,194.5255,238.3929,188.218,245.957" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="309" y="172.0669">send miflora data</text><!--MD5=[3c190e46bf5231713ee75fef79e9614b]
link nodered to discord--><path codeLine="71" d="M230.241,410.17 C250.547,417.829 277.828,429.331 300,443 C393.969,500.93 490.16,593.073 526.19,628.9817 " fill="none" id="nodered-to-discord" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="529.886,632.6786,526.3514,623.4859,526.3508,629.1427,520.694,629.1421,529.886,632.6786" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="427" y="506.5669">send notifications</text><!--MD5=[3d590248a590d66b3d712824305d9c9d]
reverse link fritzBox to nodered--><path codeLine="72" d="M708.442,382.454 C697.083,364.592 676.311,337.082 650,325 C586.184,295.696 401.368,305.184 334,325 C288.37,338.422 241.154,369.554 217.141,386.855 " fill="none" id="fritzBox-backto-nodered" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="711.125,386.772,709.7733,377.0163,708.4864,382.5249,702.9779,381.238,711.125,386.772" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="397" y="313.0669">get plug data via API</text><!--MD5=[3fb8a59f7832bc28ac93a5721bdd488b]
@startuml
skinparam shadowing false

skinparam package {
  BackgroundColor white
  BorderColor black
  FontStyle italic bold

  BackgroundColor<<Environment>> PaleGreen
  BackgroundColor<<RaspberryPi>> LightSalmon
  BackgroundColor<<Hardware>> SeaShell
  BackgroundColor<<Docker>> LightSkyBlue
}

skinparam class {
  BackgroundColor none
  BorderColor Black
}

hide members
hide circle
hide stereotype

package "Environment" as E1 <<Environment>> {
  class "La Crosse Sensor(s)" as sensorLacrosse
}

package "Environment" as E2 <<Environment>> {
  class "MiFlora Sensor(s)" as sensorMiflora
}

package "Environment" as E3 <<Environment>> {
  class "FritzBox" as fritzBox
  class "Fritz DECT 200 smart plug" as fritzPlug
  fritzPlug <-up-> fritzBox: exchange data
}

package RaspberryPi <<RaspberryPi>> {
  package "Attached Hardware" <<Hardware>> {
    class "JeeLink" as jeelink
  }

  package Docker <<Docker>> {
    class nodered
    class grafana
    class influxdb
    class mosquitto

    mosquitto -down-> nodered: push data
    nodered -down-> influxdb: store timeseries data
    grafana -up-> influxdb: get timeseries data
  }

  package "Crontab Scripts" {
    class "raspi-health.py" as scriptRaspiHealth
    class "miflora/gather.py" as scriptMiflora

    scriptRaspiHealth -right[hidden]-> scriptMiflora
  }

  scriptRaspiHealth -down-> mosquitto: send RPi health data
}

package "External" as Ex {
  class "DiscordBot" as discord
}

sensorLacrosse -left-> jeelink: send data
jeelink -left-> nodered : receive data
scriptMiflora -right-> sensorMiflora: poll data
scriptMiflora -down-> mosquitto: send miflora data
nodered -down- -> discord: send notifications
nodered -left-> fritzBox: get plug data via API
@enduml

PlantUML version 1.2021.2beta9(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
